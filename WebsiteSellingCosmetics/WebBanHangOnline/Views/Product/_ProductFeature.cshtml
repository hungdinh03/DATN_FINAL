@model IEnumerable<WebBanHangOnline.Models.EF.Product>

@if (Model != null && Model.Any())
{
    var i = 0;

<div id="dealOfTheWeekCarousel" class="carousel slide deal-of-the-week" data-ride="carousel">
    <div class="container">
        <div class="carousel-inner">
        @foreach (var item in Model)
        {
            var defaultImage = "";
            var hoverImage = "";
            var img = item.ProductImage.FirstOrDefault(x => x.IsFeature);
            var hoverImg = item.ProductImage.FirstOrDefault(x => x.IsDefault);

            if (img != null)
            {
                defaultImage = img.Image;
            }
            else
            {
                defaultImage = "/Uploads/images/No_Image_Available.jpg";
            }
            if (hoverImg != null)
            {
                hoverImage = hoverImg.Image;
            }
            else
            {
                hoverImage = defaultImage;
            }

            <div class="carousel-item @(i == 0 ? "active" : "")">
                <div class="row align-items-center">
                    @if (i % 2 == 0)  // Nếu i là chẵn
                    {
                    <div class="col-lg-6">
                        <div class="deal-of-the-week-img">
                            <a href="/chi-tiet/@item.Alias-p@(item.Id)">
                                <img id="best-seller-img-@i" class="w-100 best-seller-img" src="@defaultImage" data-default="@defaultImage" data-hover="@hoverImage" alt="@item.Title">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-6 text-right deal-of-the-week-col">
                        <div class="deal-of-the-week-content d-flex flex-column align-items-center py-2" style="background-color: rgba(242, 242, 242, 0.8);">
                            <div class="section-title">
                                <h2>Sản Phẩm Nổi Bật</h2>
                            </div>
                            <div class="timer" style="text-align: center !important;">
                                <a href="/chi-tiet/@item.Alias-p@(item.Id)">
                                    <h3>@item.Title</h3>
                                </a>
                                <div class="mt-3 px-5 text-center" style="font-size: 16px;">
                                    @item.Description
                                </div>
                            </div>
                            <div class="green-button shop-now-button"><a href="/chi-tiet/@item.Alias-p@(item.Id)">Mua Ngay</a></div>
                        </div>
                    </div>
                    }
                    else
                    {
                    <div class="col-lg-6 text-right deal-of-the-week-col">
                        <div class="deal-of-the-week-content d-flex flex-column align-items-center py-2" style="background-color: rgba(242, 242, 242, 0.8);">
                            <div class="section-title">
                                <h2>Sản Phẩm Nổi Bật</h2>
                            </div>
                            <div class="timer" style="text-align: center !important;">
                                <a href="/chi-tiet/@item.Alias-p@(item.Id)">
                                    <h3>@item.Title</h3>
                                </a>
                                <div class="mt-3 px-5 text-center" style="font-size: 16px;">
                                    @item.Description
                                </div>
                            </div>
                            <div class="green-button shop-now-button"><a href="/chi-tiet/@item.Alias-p@(item.Id)">Mua Ngay</a></div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="deal-of-the-week-img">
                            <a href="/chi-tiet/@item.Alias-p@(item.Id)">
                                <img id="best-seller-img-@i" class="w-100 best-seller-img" src="@defaultImage" data-default="@defaultImage" data-hover="@hoverImage" alt="@item.Title">
                            </a>
                        </div>
                    </div>
                    }
                </div>
            </div>
            i++;
        }
        </div>

        <a class="carousel-control-prev" href="#dealOfTheWeekCarousel" role="button" data-slide="prev">
            <span style="width: 50px; height: 50px; background-color: black; margin-top: 100px; margin-left: -200px;" class="d-flex justify-content-center align-items-center rounded-circle">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#dealOfTheWeekCarousel" role="button" data-slide="next">
            <span style="width: 50px; height: 50px; background-color: black; margin-top: 100px; margin-right: -200px;" class="d-flex justify-content-center align-items-center rounded-circle">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
}
